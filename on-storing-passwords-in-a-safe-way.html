<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="author" content="Romain Pellerin" />
        <meta name="keywords" content="romain pellerin, romain, pellerin, portfolio, site personnel, personal website, blog, password, security" />
        <meta name="geo.placename" content="San Francisco, California, USA" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="all" />
        <link rel="stylesheet" href="//romainpellerin.eu/theme/css/main.css" type="text/css" />
        <link rel="shortcut icon" href="//romainpellerin.eu/favicon.ico" />

        <script>
        function _dntEnabled(dnt, userAgent) {
            'use strict';

            // for old version of IE we need to use the msDoNotTrack property of navigator
            // on newer versions, and newer platforms, this is doNotTrack but, on the window object
            // Safari also exposes the property on the window object.
            var dntStatus = dnt || navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
            var ua = userAgent || navigator.userAgent;

            // List of Windows versions known to not implement DNT according to the standard.
            var anomalousWinVersions = ['Windows NT 6.1', 'Windows NT 6.2', 'Windows NT 6.3'];

            var fxMatch = ua.match(/Firefox\/(\d+)/);
            var ieRegEx = /MSIE|Trident/i;
            var isIE = ieRegEx.test(ua);
            // Matches from Windows up to the first occurance of ; un-greedily
            // http://www.regexr.com/3c2el
            var platform = ua.match(/Windows.+?(?=;)/g);

            // With old versions of IE, DNT did not exist so we simply return false;
            if (isIE && typeof Array.prototype.indexOf !== 'function') {
                return false;
            } else if (fxMatch && parseInt(fxMatch[1], 10) < 32) {
                // Can't say for sure if it is 1 or 0, due to Fx bug 887703
                dntStatus = 'Unspecified';
            } else if (isIE && platform && anomalousWinVersions.indexOf(platform.toString()) !== -1) {
                // default is on, which does not honor the specification
                dntStatus = 'Unspecified';
            } else {
                // sets dntStatus to Disabled or Enabled based on the value returned by the browser.
                // If dntStatus is undefined, it will be set to Unspecified
                dntStatus = { '0': 'Disabled', '1': 'Enabled' }[dntStatus] || 'Unspecified';
            }
            return dntStatus === 'Enabled' ? true : false;
        }
        if (!_dntEnabled()) {
            // Analytics here
        }
        </script>

        <!-- Social media -->
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@romainpellerin" />
        <meta name="description" content="My journey towards increased security" />
        <meta property="og:image" name="twitter:image" content="//romainpellerin.eu/theme/img/romain_pellerin-1x.jpg" />
        <meta property="og:title" name="twitter:title" content="On Storing Passwords In A Safe Way - Romain Pellerin's Blog" />
        <meta property="og:description" name="twitter:description" content="My journey towards increased security" />

        <title>On Storing Passwords In A Safe Way - Romain Pellerin's Blog</title>

        <link href="//romainpellerin.eu/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="Romain Pellerin's Blog Atom Feed" />
        <link href="//romainpellerin.eu/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="Romain Pellerin's Blog RSS Feed" />
    </head>
    <body>
        <div id="wrapper">

<nav class="flexbox-row">
    <a class="center" href="//romainpellerin.eu/">Homepage</a>
    <span class="center">|| Blog:</span>
    <a class="center" href="//romainpellerin.eu/archives.html">Archives (all posts)</a>
    <a class="center" href="//romainpellerin.eu/categories.html">Categories</a>
    <a class="center" href="//romainpellerin.eu/tags.html">Tags</a>
    <a class="center" href="//romainpellerin.eu/feeds/rss.xml">RSS feed</a>
    <a class="center" href="//romainpellerin.eu/feeds/atom.xml">Atom feed</a>
</nav><header class="article-header center">
    <p id="back-line" class="small grey"><span>
<time datetime="2018-07-31T00:20:00+02:00">Tue 31 July 2018</time> - Last Update: <time datetime="2020-01-06T10:48:00+01:00">Mon 06 January 2020</time>        </p>
    <h1>On Storing Passwords In A Safe Way</h1>
    <div class="grey">
        <p class="italic">My journey towards increased security</p>
        <p class="small">
            &#128338; <span title="Based on a 200 words per minute reading speed. This article has a total of 1077 words.">5 min read</span>
        </p>
<p class="small">Category: <a title="Go to the category" href="//romainpellerin.eu/category/computers.html">Computers</a></p><p class="small">Tags: <a title="Go to the tag" href="//romainpellerin.eu/tag/password.html">password</a>, <a title="Go to the tag" href="//romainpellerin.eu/tag/security.html">security</a></p>    </div>
</header>
<article>
    <p>It's been a while since I last wrote here... Let's fix this with a new article on an important topic.</p>
<h1 id="storing-passwords">Storing passwords</h1>
<p>For a very long time I have stored my passwords within Firefox, synced "in the Cloud" through my Firefox account. This solution offers four main advantages:</p>
<ul>
<li>Passwords are synced accross devices, always at hand</li>
<li>Passwords are conveniently auto-filled as I browse the web</li>
<li>Passwords are encrypted on Mozilla's servers (<a href="https://support.mozilla.org/en-US/questions/1169355">source</a>)</li>
<li>Passwords are encrypted locally on my computer (<a href="https://support.mozilla.org/en-US/questions/1210914">source</a>), although a Master Password is required to prevent theft (since the encryption key is stored in plain) by adding another layer of security (<a href="https://support.mozilla.org/en-US/questions/1041243">source</a>)</li>
</ul>
<p>While this solution had seemed like a good one for a while, I recently thought I could do better than putting my trust in a company - even though Mozilla is respectable and trustworthy. Eventually, every big company gets hacked and I don't really know how they encrypt my data on their servers.</p>
<p>Moreover, I wanted to be able to safely backup my passwords somewhere (offline, if need be, or elsewhere). My past solution had a flaw: were I to lose my laptop and smartphone (theft, apartment burns dowm, earthquake, whatever), I'd have no way to recover my passwords since I don't know any of them, not even my Firefox password (what good would it be for anyway, since two factor authentication is enabled and my two only trusted devices would be lost).</p>
<p><em>Side note on this topic</em>: I always randomly type my passwords as I create accounts. I don't use services that generate them for me (like Dashlane or Lastpass to mention a few). I don't trust these programs to store my passwords (we'll see why in a bit). Nonetheless, I always make sure to include capital letters, numbers and special characters, with a length greater than 8.</p>
<p>With this all in mind, I needed to find a solution that could fulfill the following requirements:</p>
<ul>
<li>Not hosted on someone else's servers</li>
<li>Encrypted at all times</li>
<li>Easily accessible on multiple devices, including Linux and mobile phone(s)</li>
<li>Synced accross my devices</li>
<li>As much user friendly as possible so that I can easily switch to this new solution and change my habits</li>
<li>Backed up offline or in a different location AND easily recoverable in case of loss of my trusted devices</li>
<li>Based on a non proprietary solution - both free and open source ideally - and free of charge</li>
<li>Auto form-filling on a web is a plus (through a web extension for instance)</li>
<li>Two factor auth management is a plus: it could be nice to save 2FA secrets as well</li>
<li>Password generation is optional, I'm fine with random typing on my keyboard every once in a while</li>
</ul>
<h2 id="market-analysis">Market analysis</h2>
<h3 id="1password">1password</h3>
<p>Apparently a great tool, I've read a lof of good reviews. Advocated by the famous website <a href="https://haveibeenpwned.com/1Password">Have I Been Pwned</a>. However, since this is proprietary software, it is de facto a no-go for me. Plus it's a paid service.</p>
<h3 id="keepass">Keepass</h3>
<p><a href="https://keepass.info/">A tool initially made for Windows</a>.</p>
<h4 id="pros">Pros</h4>
<ul>
<li>Encryption out of the box</li>
<li>Free and open source</li>
<li>Available on Linux through a port</li>
<li>There's an Android app</li>
<li>There's a <a href="https://addons.mozilla.org/fr/firefox/addon/keefox/">Firefox extension</a></li>
<li>Auto form filling</li>
<li>Automatic generation of passwords</li>
<li>I can easily save a backup file with all my passwords on my personal cloud</li>
<li><a href="https://keepass.info/plugins.html#keeotp">2FA management through a plugin</a></li>
<li><a href="https://keepass.info/plugins.html#otpkeyprov">Database can be protected with 2FA through a plugin</a></li>
</ul>
<h4 id="cons">Cons</h4>
<ul>
<li>I must trust the binaries or build them myself after reviewing the sources...</li>
</ul>
<h3 id="pass-linux-cli">Pass (Linux CLI)</h3>
<p><a href="https://www.passwordstore.org/">A tool</a> <a href="https://wiki.archlinux.org/index.php/Pass">for Linux</a> (CLI) based on GPG. Convenient on a laptop, not very much on a mobile phone. However, I tend to trust a CLI tool more than Keepass. One of the reasons I guess is that it's on the official Linux distributions repos.</p>
<p>In case of phone loss, here is a nice way to restore the code on your phone by generating QR codes from what's stored in pass:</p>
<div class="highlight"><pre><span></span><code>sudo apt install qrencode
find .password-store/ -type f -iname <span class="s2">&quot;*.otp.gpg&quot;</span> -printf <span class="s1">&#39;%P\n&#39;</span> <span class="p">|</span> sed -n <span class="s1">&#39;s|\.gpg||p&#39;</span> <span class="p">|</span> <span class="k">while</span> <span class="nb">read</span> f<span class="p">;</span> <span class="k">do</span> pass <span class="s2">&quot;</span><span class="nv">$f</span><span class="s2">&quot;</span><span class="p">;</span> <span class="k">done</span> <span class="p">|</span> <span class="k">while</span> <span class="nb">read</span> s<span class="p">;</span> <span class="k">do</span> qrencode -o - <span class="s2">&quot;</span><span class="nv">$s</span><span class="s2">&quot;</span> <span class="p">|</span> display<span class="p">;</span> <span class="k">done</span>
</code></pre></div>

<h4 id="pros_1">Pros</h4>
<ul>
<li>Encryption out of the box with GPG</li>
<li>Automatic generation of passwords</li>
<li><a href="https://www.passwordstore.org/#other">Cross platform</a>: Linux, Android and Firefox plugin at least</li>
<li>I can easily save a backup file with all my passwords on my personal cloud</li>
<li>2FA management (actually Pass can save any arbitraty data, it's essentially made up of encrypted plain text files)</li>
<li>Super easily backupable (zip the directory, that's all) on my personal cloud</li>
</ul>
<h4 id="cons_1">Cons</h4>
<ul>
<li>Not very user friendly</li>
<li>I must trust binaries, specifically the Android app and Firefox binary; the Linux script has all my trust though (yes, <code>pass</code> is a script)</li>
</ul>
<h3 id="dashlane-and-lastpass">Dashlane and Lastpass</h3>
<p>Proprietary software: no go.</p>
<p>One cool feature Dashlane offers that is worth mentioning though: setting an emergency contact for your important accounts in case of a critical matter. I wish other tools offered the same feature.</p>
<h3 id="conclusion">Conclusion</h3>
<p>Seems like I'll either go with either Keepass or Pass. I'll update this article as I become familiar with either of them.</p>
<p><strong>Update January 2019</strong>: I've been using <code>pass</code> for a few months now and am very satisfied so far.</p>
<h1 id="another-topic-two-factor-authentication">Another topic: two-factor authentication</h1>
<p>For this one, I felt that storing my secrets on my phone (Google Authenticatgor to name it) only sounded a little too much like a Single Point of Failure. Should I ever lose access to my phone for any reason, I'd be locked out of services with two factor authentication enabled. Time had come to find a way to save a backup of these secrets.</p>
<p>To do so, I developed my own solution: <a href="https://github.com/rpellerin/gauth2/">gauth2</a>. It is forked from another project (<a href="https://github.com/gbraad/gauth">gauth</a>). I improved it and redesigned it a bit. I also added some features.</p>
<p>How does it work? Well, it is a web app that stores in one's browser (in the <code>LocalStorage</code>, to be precise) one's secrets and generate One Time Passwords based on these secrets. The secrets can even be encrypted with a password, to prevent someone with access to the browser from stealing the secrets. It also allows secrets to be exported and imported for more convenience. I am very satisfied with it so far. This, on an encrypted laptop, coupled with Google Authenticator, is a pretty solid combination.</p>
<p><br /></p>
<p>Hope this helps. Cheers!</p>
<h1 id="online-resources">Online resources</h1>
<ul>
<li><a href="https://www.juliaferraioli.com/blog/2018/08/2fa-sms-you/">2FA, SMS, and you</a></li>
<li><a href="https://korben.info/authentification-double-facteur-2fa.html">L’authentification double facteur (2FA), oui mais pas n’importe comment !</a></li>
<li><a href="https://chown.me/blog/my-recent-journey-with-2FA.html">My recent journey with 2FA</a></li>
<li><a href="https://medium.com/@chasinglogic/the-definitive-guide-to-password-store-c337a8f023a1">The Definitive Guide to password-store</a></li>
<li><a href="https://medium.com/@davidpiegza/using-pass-in-a-team-1aa7adf36592">Using pass in a team</a></li>
</ul>
</article>
<footer class="grey italic small">
    Last update: Mon 06 January 2020</footer>

        </div> <!-- WRAPPER -->
    </body>
</html>